button {
  background-image: none; // Reset unusual Firefox-on-Android default style; see https://github.com/necolas/normalize.css/issues/214
  background-color: $default;
  color: $text;
  line-height: 1.4em;
  text-align: center;
  border: 1px solid $frame;
  border-radius: 4px;
  margin-bottom: 0; // For input.btn
  padding: 0.25em 0.75em;
  box-shadow: 0 1px 0.25em 0 rgba(black, 0.1);
  display: inline-block;
  vertical-align: middle;
  cursor: pointer;
  white-space: nowrap;
  touch-action: manipulation;
  user-select: none;
  &.danger {
    color: $red;
    &:hover,
    &:focus,
    &:active {
      color: $red;
    }
  }
  & + button:not(.no-autospace),
  & + a.button-spacing:not(.no-autospace) {
    margin-left: 0.75em;
  }
  &:hover,
  &:focus {
    background-color: darken($default, 2%);
    color: $text;
    text-decoration: none;
    outline: none;
  }
  &:active {
    background-color: darken($default, 4%);
    box-shadow: none;
    transform: translateY(1px);
    background-image: none;
  }
  &.flush-icon:before {
    margin: 0;
  }
  &.disabled,
  &[disabled] {
    cursor: not-allowed;
    opacity: 0.65;
    pointer-events: none;
    box-shadow: none;
    &:hover,
    &:focus {
      background-color: $default;
    }
    &:active {
      transform: none;
    }
  }
}

button.primary {
  background-color: $primary;
  border-color: darken($primary, 4%);
  color: white;
  box-shadow: 0 1px 0.25em 0 rgba(black, 0.3);
  &.danger {
    background-color: $red;
    border-color: darken($red, 4%);
    &:hover,
    &:focus {
      background-color: lighten($red, 5%);
      border-color: lighten($red, 1%);
    }
    &:active {
      background-color: darken($red, 1%);
    }
  }
  &:hover,
  &:focus {
    background-color: lighten($primary, 5%);
    border-color: lighten($primary, 1%);
    color: white;
  }
  &:active {
    background-color: darken($primary, 1%);
    box-shadow: none;
  }
  &.disabled,
  &[disabled] {
    box-shadow: none;
  }
}

// button.symbol {
//   background-color: transparent;
//   border-color: transparent;
//   border-radius: 50%;
//   color: $link;
//   padding-left: 0.5em;
//   padding-right: 0.5em;
//   box-shadow: none;
//   &:before { margin-right: 0; }
//   &.flush { padding: 0; }
//   &.flush-sides {
//     padding-left: 0;
//     padding-right: 0;
//   }
//   &:hover,
//   &:focus {
//     color: lighten($link, 5%);
//     text-shadow: 0 1px 1px rgba(black, 0.1);
//   }
//   &:active {
//     color: darken($link, 1%);
//     box-shadow: none;
//     text-shadow: none;
//     transform: translateY(0.5px);
//   }
//   &.active {
//     background-color: rgba($link, 0.2);
//     transform: none;
//   }
//   &.light {
//     color: $default;
//     &:hover,
//     &:focus {
//       color: white;
//       text-shadow: 0 1px 1px rgba(black, 0.7);
//     }
//     &:active {
//       color: darken($default, 5%);
//       text-shadow: none;
//     }
//     &.active {
//       background-color: rgba($default, 0.4);
//     }
//   }
//   &.disabled,
//   &[disabled] {
//     color: $grey;
//     &:hover,
//     &:focus {
//       background-color: transparent;
//     }
//     &:active {
//       transform: none;
//     }
//   }
// }

button.clear {
  background-color: transparent;
  border-color: transparent;
  color: $grey;
  box-shadow: none;
  &:hover,
  &:focus {
    color: $red;
  }
  &:active {
    color: darken($red, 5%);
    box-shadow: none;
    transform: translateY(0.5px);
  }
  &.flush { padding: 0; }
  &.flush-sides {
    padding-left: 0;
    padding-right: 0;
  }
  &.disabled,
  &[disabled] {
    &:hover,
    &:focus {
      background-color: transparent;
      color: $grey;
      transform: none;
    }
  }
  &.light {
    color: $default;
    &:hover,
    &:focus {
      color: $red;
      text-shadow: 0 1px 1px rgba(black, 0.7);
    }
    &:active {
      color: darken($red, 5%);
      text-shadow: none;
    }
  }
}

.btn-group {
  position: relative;
  display: inline-block;
  vertical-align: middle;
  button {
    margin: 0;
    position: relative;
    float: left;
    & + button {
      margin-left: -1px;
    }
    &:not(:first-child):not(:last-child) {
      border-radius: 0;
    }
    &:first-child:not(:last-child) {
      margin-left: 0;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }
    &:last-child:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }
    &.active {
      background-color: $active;
      color: white;
      box-shadow: inset 0 3px 5px rgba(0,0,0,.25);
      transform: translateY(1px);
    }
    &:hover,
    &:focus,
    &:active,
    &.active {
      z-index: 2;
    }
  }
}

button {
  &.large {
    padding-bottom: 0.35em;
  }
  &.block {
    display: block;
    margin: 0;
    width: 100%;
  }
}

a.button-spacing {
  line-height: 1.4em;
  display: inline-block;
  vertical-align: middle;
  padding: 0.25em 0.75em;
  border: 1px solid transparent;
  & + button,
  & + a.button-spacing {
    margin-left: 0.75em;
  }
  &.flush-sides {
    padding-left: 0;
    padding-right: 0;
    border-left-width: 0px;
    border-right-width: 0px;
  }
  &.flush-icon:before {
    margin: 0;
  }
}
